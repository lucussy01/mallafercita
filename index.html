<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Interactiva Ingeniería Civil Industrial</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }
    #malla {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      gap: 16px;
    }
    .semestre {
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      min-width: 200px;
    }
    .semestre h3 {
      text-align: center;
      margin-top: 0;
      color: #444;
    }
    .curso {
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      margin: 8px 0;
      cursor: pointer;
      background: #fafafa;
      transition: all 0.2s ease;
      position: relative;
    }
    .curso:hover {
      background: #f0f0f0;
    }
    .curso.aprobado {
      background-color: #d4edda;
      border-color: #28a745;
    }
    .curso.bloqueado {
      background-color: #f8d7da;
      border-color: #dc3545;
      color: #999;
      cursor: not-allowed;
    }
    .tooltip {
      position: absolute;
      background: #333;
      color: white;
      padding: 6px 8px;
      border-radius: 4px;
      font-size: 12px;
      top: 100%;
      left: 0;
      z-index: 10;
      white-space: pre-wrap;
      display: none;
    }
    .curso:hover .tooltip {
      display: block;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva Ingeniería Civil Industrial</h1>
  <div id="malla"></div>

  <script>
    const cursos = [
      { codigo: "MA1001", nombre: "Introducción al Cálculo", semestre: 1, prerrequisitos: [] },
      { codigo: "FI1000", nombre: "Física I", semestre: 1, prerrequisitos: [] },
      { codigo: "MA1101", nombre: "Álgebra I", semestre: 1, prerrequisitos: [] },
      { codigo: "MA1002", nombre: "Cálculo II", semestre: 2, prerrequisitos: ["MA1001"] },
      { codigo: "FI1100", nombre: "Física II", semestre: 2, prerrequisitos: ["FI1000", "MA1001"] },
      { codigo: "MA1102", nombre: "Álgebra II", semestre: 2, prerrequisitos: ["MA1101"] },
      { codigo: "MA2001", nombre: "Cálculo Avanzado", semestre: 3, prerrequisitos: ["MA1002"] },
      { codigo: "IN3141", nombre: "Probabilidades", semestre: 4, prerrequisitos: ["MA2001"] },
      { codigo: "IN3224", nombre: "Estadística", semestre: 5, prerrequisitos: ["IN3141"] },
      { codigo: "IN3272", nombre: "Decisiones bajo Incertidumbre", semestre: 6, prerrequisitos: ["IN3141"] }
      // Puedes continuar con los demás semestres y cursos aquí
    ];

    const storageKey = "malla_aprobados";
    const aprobados = new Set(JSON.parse(localStorage.getItem(storageKey)) || []);

    function guardarProgreso() {
      localStorage.setItem(storageKey, JSON.stringify([...aprobados]));
    }

    function crearMalla() {
      const container = document.getElementById("malla");
      container.innerHTML = "";

      const maxSemestre = Math.max(...cursos.map(c => c.semestre));
      for (let s = 1; s <= maxSemestre; s++) {
        const columna = document.createElement("div");
        columna.className = "semestre";
        columna.innerHTML = `<h3>${s}° semestre</h3>`;

        cursos.filter(c => c.semestre === s).forEach(curso => {
          const div = document.createElement("div");
          div.className = "curso";
          div.textContent = `${curso.codigo} - ${curso.nombre}`;

          const cumplidos = curso.prerrequisitos.every(p => aprobados.has(p));

          if (aprobados.has(curso.codigo)) {
            div.classList.add("aprobado");
          } else if (!cumplidos) {
            div.classList.add("bloqueado");

            const faltantes = curso.prerrequisitos.filter(p => !aprobados.has(p));
            const tooltip = document.createElement("div");
            tooltip.className = "tooltip";
            tooltip.textContent = `Falta: ${faltantes.join(", ")}`;
            div.appendChild(tooltip);
          }

          div.onclick = () => {
            if (div.classList.contains("bloqueado")) return;
            if (aprobados.has(curso.codigo)) {
              aprobados.delete(curso.codigo);
            } else {
              aprobados.add(curso.codigo);
            }
            guardarProgreso();
            crearMalla();
          };

          columna.appendChild(div);
        });

        container.appendChild(columna);
      }
    }

    crearMalla();
  </script>
</body>
</html>
